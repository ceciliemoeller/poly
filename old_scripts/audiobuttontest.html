<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych_BPM/jspsych-audio-bpm-button-response.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body></body>
<script>

var timeline = [];

var welcome = {
    type: "html-button-response",
    stimulus: "Welcome to the experiment. ",
    choices:["Tap here to proceed."]
  };

  timeline.push(welcome);

  /* define instructions trial */
  var instructions = {
      type: "html-button-response",
      stimulus: "<p>In this experiment, we would like you to tap along to the beat of the rhythms</p>"  ,             
      choices:["Tap here to proceed."],
      post_trial_gap: 2000
    };
    timeline.push(instructions);

    
    // test trials
var test_stimuli = [
  { stimulus: "sounds/pitch/3-C3-8__4-C4-8.wav"},
  { stimulus: "sounds/pitch/3-C3-12__4-C4-4.wav"},
//   { stimulus: "sounds/pitch/3-C3-16__4-C4-0.wav"},
//   { stimulus: "sounds/pitch/3-C4-8__4-C3-8.wav"},
//   { stimulus: "sounds/pitch/3-C4-12__4-C3-4.wav"},
//   { stimulus: "sounds/pitch/3-C4-16__4-C3-0.wav"},
];

var fixation = {
      type: 'html-button-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 1000,
    }

    var test = {
      type: "audio-bpm-button-response",
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['Tap here', 'Do not tap here'],
    //   response_ends_trial: false
    }

    var test_procedure = {
      timeline: [fixation, test],
      timeline_variables: test_stimuli,
      randomize_order: true,
      repetitions: 1
    }


timeline.push(test_procedure);


 var audio = ['sounds/pitch/3-C3-8__4-C4-8.wav', 
    'sounds/pitch/3-C3-12__4-C4-4.wav',
    'sounds/pitch/3-C3-16__4-C4-0.wav',
    'sounds/pitch/3-C4-8__4-C3-8.wav',
    'sounds/pitch/3-C4-12__4-C3-4.wav',
    'sounds/pitch/3-C4-16__4-C3-0.wav',
];


  jsPsych.init({
    timeline: timeline,
    preload_audio: audio,
    on_finish: function() {
    jsPsych.data.displayData();
  }
  });
  </script>
  </html>