<!DOCTYPE html>
<html>

<head>
    <title>MIB polyrhythm pilot</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych_BPM/jspsych-audio-bpm-button-response.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    </link>
</head>

<body></body>
<script>

    var timeline = [];

    var welcome = {
        type: "html-button-response",
        stimulus: "<p>In this experiment, we would like you to tap along to the beat of some musical rhythms.</p>" +
        "In this pilot experiment, you will hear some musical rhythms." +
            "We would like you to use a button on the screen to tap along to the beat of the sounds." +
            "Here are some examples of what we mean when we say 'the beat':" +
            "The beat is like a clockâ€™s tick." +
            "The beat is what you would naturally clap along to, or tap your foot to." +
            "The beat is the steady pulse you feel when listening to music." +
            "Your feet emphasize the beat when you walk at a constant pace in time with music.",

        choices: ["Tap here to proceed."]
    };

    timeline.push(welcome);
    /* assess natural pace (NP) */
    var np_instr = {
        type: "html-button-response",
        stimulus: "To warm up, we would like to start by asking you to tap at a steady rate that feels comfortable for you." +
            "When you click the button below, you will hear a single bell sound followed by silence." +
            "When you hear the bell, please start tapping your preferred steady rate and continue to do so until you hear the bell again",

        choices: ["Please tap here"]
    };

    timeline.push(np_instr);

    var nat_pace = {
        type: 'audio-bpm-button-response',
        stimulus: 'sounds/pitch/3-C3-8__4-C4-8.wav',
        choices: ["Please tap here"]
    };

    // timeline.push(nat_pace);


    /* define instructions trial */
    var instructions = {
        type: "html-button-response",
        stimulus: "<h2>Thank you.</h2>" +
            "<h3>You are ready to start the tapping experiment.</h2>" +
      
            "<p> Your task here is to simply tap along to the underlying beat,</p>" +
            "<p> as you do for instance, when you are clapping your hands with the audience at a concert.</p>" +
            "<p class='largegap-above'> You do not need to tap from the very beginning.</p>" +
            "<p> Just listen to the musical rhythms, take your time, </p>" +
            "<p> and start tapping whenever you feel the beat. Please continue tapping until the sound stops.</p>",
        choices: ["Click here to proceed."],
        post_trial_gap: 2000
    };
    timeline.push(instructions);




    // test trials
    var test_stimuli = [
        { stimulus: "sounds/pitch/3-C3-8__4-C4-8.wav" },
        { stimulus: "sounds/pitch/3-C3-12__4-C4-4.wav" },
        //   { stimulus: "sounds/pitch/3-C3-16__4-C4-0.wav"},
        //   { stimulus: "sounds/pitch/3-C4-8__4-C3-8.wav"},
        //   { stimulus: "sounds/pitch/3-C4-12__4-C3-4.wav"},
        //   { stimulus: "sounds/pitch/3-C4-16__4-C3-0.wav"},
    ];

    var fixation = {
        type: 'html-button-response',
        stimulus: "<p>Great! </p>" +
            "<p>Take a small break if you like. When you are ready again, click below to proceed</p>",
        choices: ["Next"]
    }

    var test = {
        type: "audio-bpm-button-response",
        stimulus: jsPsych.timelineVariable('stimulus'),
        prompt: "<p>Do you hear a steady beat?</p>" +
            "<p> Then start tapping!</p>",
        choices: ["<p class='font'> <strong>Tap here!</strong></p>"]
        //   response_ends_trial: false
    }

    var test_procedure = {
        timeline: [test, fixation],
        timeline_variables: test_stimuli,
        randomize_order: true,
        repetitions: 1
    }


    timeline.push(test_procedure);

        /* assess natural pace (NP) */
        var demographics = {
        type: "html-button-response",
        stimulus: "<p> Thank you! You are done with the tapping tasks.</p>" +
        "<p> Before you leave, we would like to ask you a few questions about your background. Everything is anonymous.</p>",

        choices: ["Next"]
    };

    var audio = ['sounds/pitch/3-C3-8__4-C4-8.wav',
        'sounds/pitch/3-C3-12__4-C4-4.wav',
        'sounds/pitch/3-C3-16__4-C4-0.wav',
        'sounds/pitch/3-C4-8__4-C3-8.wav',
        'sounds/pitch/3-C4-12__4-C3-4.wav',
        'sounds/pitch/3-C4-16__4-C3-0.wav',
    ];


    jsPsych.init({
        timeline: timeline,
        preload_audio: audio,
        on_finish: function () {
            jsPsych.data.displayData();
        }
    });
</script>

</html>